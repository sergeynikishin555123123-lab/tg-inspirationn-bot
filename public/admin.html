// –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è v8.0
class AdminPanel {
    constructor() {
        this.currentAdmin = null;
        this.currentTab = 'dashboard';
        this.data = {
            users: [],
            roles: [],
            characters: [],
            quizzes: [],
            marathons: [],
            shopItems: [],
            posts: [],
            interactives: [],
            admins: [],
            stats: {},
            moderation: {
                works: [],
                reviews: []
            }
        };
        
        this.init();
    }

    init() {
        this.getUserIdFromURL();
        this.setupEventListeners();
        this.loadAdminInfo();
        this.loadAllData();
    }

    getUserIdFromURL() {
        const urlParams = new URLSearchParams(window.location.search);
        const userId = urlParams.get('userId');
        
        if (!userId) {
            this.showError('User ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ URL. –î–æ–±–∞–≤—å—Ç–µ ?userId=YOUR_USER_ID –∫ –∞–¥—Ä–µ—Å—É');
            return;
        }
        
        this.currentAdmin = { user_id: parseInt(userId) };
        console.log('Admin ID:', this.currentAdmin.user_id);
    }

    setupEventListeners() {
        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', (e) => {
                const tab = e.currentTarget.getAttribute('data-tab');
                this.showTab(tab);
            });
        });

        // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const userSearch = document.getElementById('userSearch');
        if (userSearch) {
            userSearch.addEventListener('input', (e) => {
                this.filterUsers(e.target.value);
            });
        }

        // –§–∏–ª—å—Ç—Ä—ã
        const roleFilter = document.getElementById('roleFilter');
        const levelFilter = document.getElementById('levelFilter');
        
        if (roleFilter) {
            roleFilter.addEventListener('change', () => this.filterUsers());
        }
        if (levelFilter) {
            levelFilter.addEventListener('change', () => this.filterUsers());
        }
    }

    async loadAdminInfo() {
        try {
            const response = await fetch(`/api/users/${this.currentAdmin.user_id}`);
            const data = await response.json();
            
            if (data.user) {
                document.getElementById('adminName').textContent = data.user.tg_first_name || '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                document.getElementById('adminId').textContent = this.currentAdmin.user_id;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∞
                const adminResponse = await fetch(`/api/admin/stats?userId=${this.currentAdmin.user_id}`);
                if (adminResponse.ok) {
                    document.getElementById('adminRole').textContent = '–°—É–ø–µ—Ä –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä';
                } else {
                    document.getElementById('adminRole').textContent = '–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä';
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∞:', error);
        }
    }

    async loadAllData() {
        try {
            await Promise.all([
                this.loadStats(),
                this.loadUsers(),
                this.loadRoles(),
                this.loadCharacters(),
                this.loadQuizzes(),
                this.loadMarathons(),
                this.loadShopItems(),
                this.loadPosts(),
                this.loadInteractives(),
                this.loadAdmins(),
                this.loadModerationData()
            ]);
            
            this.showMessage('–î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã!', 'success');
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
            this.showError('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: ' + error.message);
        }
    }

    async loadStats() {
        try {
            const response = await fetch(`/api/admin/stats?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ');
            
            const data = await response.json();
            this.data.stats = data;
            this.updateStatsDisplay(data);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
        }
    }

    updateStatsDisplay(stats) {
        const statsGrid = document.getElementById('dashboardStats');
        if (!statsGrid) return;

        statsGrid.innerHTML = `
            <div class="stat-card">
                <div class="stat-icon">üë•</div>
                <div class="stat-number">${stats.totalUsers}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-number">${stats.registeredUsers}</div>
                <div class="stat-label">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üéØ</div>
                <div class="stat-number">${stats.activeQuizzes}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–∏–∑–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                <div class="stat-number">${stats.activeMarathons}</div>
                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üõí</div>
                <div class="stat-number">${stats.shopItems}</div>
                <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ú®</div>
                <div class="stat-number">${stats.totalSparks.toFixed(0)}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∏—Å–∫—Ä</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-number">${stats.totalActivities}</div>
                <div class="stat-label">–í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚öñÔ∏è</div>
                <div class="stat-number">${stats.pendingReviews + stats.pendingWorks}</div>
                <div class="stat-label">–ù–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>
            </div>
        `;
    }

    async loadUsers() {
        try {
            const response = await fetch(`/api/admin/users-report?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º');
            
            const data = await response.json();
            this.data.users = data.users;
            this.updateUsersDisplay();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:', error);
        }
    }

    updateUsersDisplay() {
        const container = document.getElementById('usersList');
        if (!container) return;

        if (this.data.users.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üë•</div>
                    <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
                </div>
            `;
            return;
        }

        let html = `
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ò–º—è</th>
                            <th>–†–æ–ª—å</th>
                            <th>–£—Ä–æ–≤–µ–Ω—å</th>
                            <th>–ò—Å–∫—Ä—ã</th>
                            <th>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
        `;

        this.data.users.forEach(user => {
            const lastActive = new Date(user.last_active);
            const now = new Date();
            const daysAgo = Math.floor((now - lastActive) / (1000 * 60 * 60 * 24));
            
            html += `
                <tr>
                    <td>${user.id}</td>
                    <td>
                        <strong>${user.name}</strong>
                        ${user.username ? `<br><small class="text-muted">@${user.username}</small>` : ''}
                    </td>
                    <td>
                        <span class="badge badge-info">${user.role || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</span>
                    </td>
                    <td>
                        <span class="badge badge-secondary">${user.level}</span>
                    </td>
                    <td>
                        <strong>${user.sparks.toFixed(1)}</strong> ‚ú®
                    </td>
                    <td>
                        <small class="text-muted">
                            ${daysAgo === 0 ? '–°–µ–≥–æ–¥–Ω—è' : 
                              daysAgo === 1 ? '–í—á–µ—Ä–∞' : 
                              `${daysAgo} –¥–Ω. –Ω–∞–∑–∞–¥`}
                        </small>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-info" onclick="adminPanel.viewUserDetails(${user.id})">
                                üëÅÔ∏è
                            </button>
                            <button class="btn btn-sm btn-warning" onclick="adminPanel.editUserRole(${user.id})">
                                üé≠
                            </button>
                        </div>
                    </td>
                </tr>
            `;
        });

        html += `
                    </tbody>
                </table>
            </div>
        `;

        container.innerHTML = html;
        this.updateRoleFilter();
    }

    updateRoleFilter() {
        const roleFilter = document.getElementById('roleFilter');
        if (!roleFilter) return;

        const roles = [...new Set(this.data.users.map(user => user.role).filter(role => role))];
        
        let options = '<option value="">–í—Å–µ —Ä–æ–ª–∏</option>';
        roles.forEach(role => {
            options += `<option value="${role}">${role}</option>`;
        });
        
        roleFilter.innerHTML = options;
    }

    filterUsers(searchTerm = '') {
        const roleFilter = document.getElementById('roleFilter');
        const levelFilter = document.getElementById('levelFilter');
        
        const selectedRole = roleFilter ? roleFilter.value : '';
        const selectedLevel = levelFilter ? levelFilter.value : '';
        
        const filteredUsers = this.data.users.filter(user => {
            const matchesSearch = !searchTerm || 
                user.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                (user.username && user.username.toLowerCase().includes(searchTerm.toLowerCase()));
            
            const matchesRole = !selectedRole || user.role === selectedRole;
            const matchesLevel = !selectedLevel || user.level === selectedLevel;
            
            return matchesSearch && matchesRole && matchesLevel;
        });

        this.displayFilteredUsers(filteredUsers);
    }

    displayFilteredUsers(users) {
        const container = document.getElementById('usersList');
        if (!container) return;

        if (users.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üîç</div>
                    <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã.</p>
                </div>
            `;
            return;
        }

        let html = `
            <div class="table-responsive">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>–ò–º—è</th>
                            <th>–†–æ–ª—å</th>
                            <th>–£—Ä–æ–≤–µ–Ω—å</th>
                            <th>–ò—Å–∫—Ä—ã</th>
                            <th>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
        `;

        users.forEach(user => {
            const lastActive = new Date(user.last_active);
            const now = new Date();
            const daysAgo = Math.floor((now - lastActive) / (1000 * 60 * 60 * 24));
            
            html += `
                <tr>
                    <td>${user.id}</td>
                    <td>
                        <strong>${user.name}</strong>
                        ${user.username ? `<br><small class="text-muted">@${user.username}</small>` : ''}
                    </td>
                    <td>
                        <span class="badge badge-info">${user.role || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</span>
                    </td>
                    <td>
                        <span class="badge badge-secondary">${user.level}</span>
                    </td>
                    <td>
                        <strong>${user.sparks.toFixed(1)}</strong> ‚ú®
                    </td>
                    <td>
                        <small class="text-muted">
                            ${daysAgo === 0 ? '–°–µ–≥–æ–¥–Ω—è' : 
                              daysAgo === 1 ? '–í—á–µ—Ä–∞' : 
                              `${daysAgo} –¥–Ω. –Ω–∞–∑–∞–¥`}
                        </small>
                    </td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-info" onclick="adminPanel.viewUserDetails(${user.id})">
                                üëÅÔ∏è
                            </button>
                            <button class="btn btn-sm btn-warning" onclick="adminPanel.editUserRole(${user.id})">
                                üé≠
                            </button>
                        </div>
                    </td>
                </tr>
            `;
        });

        html += `
                    </tbody>
                </table>
            </div>
        `;

        container.innerHTML = html;
    }

    async loadRoles() {
        try {
            const response = await fetch(`/api/admin/roles?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ–ª—è–º');
            
            this.data.roles = await response.json();
            this.updateRolesDisplay();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–æ–ª–µ–π:', error);
        }
    }

    updateRolesDisplay() {
        const container = document.getElementById('rolesList');
        if (!container) return;

        if (this.data.roles.length === 0) {
            container.innerHTML = `
                <div class="empty-state">
                    <div class="empty-state-icon">üé≠</div>
                    <h3>–†–æ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–æ–ª–µ–π.</p>
                    <button class="btn btn-success mt-2" onclick="adminPanel.showRoleForm()">
                        ‚ûï –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é —Ä–æ–ª—å
                    </button>
                </div>
            `;
            return;
        }

        let html = '<div class="roles-grid" style="display: grid; gap: 16px;">';

        this.data.roles.forEach(role => {
            const userCount = this.data.users.filter(user => user.role === role.name).length;
            
            html += `
                <div class="item-card">
                    <div class="item-header">
                        <div>
                            <div class="item-title">
                                ${role.icon} ${role.name}
                            </div>
                            <div class="item-description">
                                ${role.description}
                            </div>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-info" onclick="adminPanel.editRole(${role.id})">
                                ‚úèÔ∏è
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="adminPanel.deleteRole(${role.id})" ${userCount > 0 ? 'disabled' : ''}>
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="item-meta">
                        <span class="badge ${role.is_active ? 'badge-success' : 'badge-danger'}">
                            ${role.is_active ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∞'}
                        </span>
                        <span class="badge badge-info">
                            üë• ${userCount} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                        </span>
                        <span class="badge badge-secondary">
                            ${role.available_buttons.length} –∫–Ω–æ–ø–æ–∫
                        </span>
                    </div>
                    <div class="item-footer">
                        <small class="text-muted">
                            –°–æ–∑–¥–∞–Ω–∞: ${new Date(role.created_at).toLocaleDateString()}
                        </small>
                    </div>
                </div>
            `;
        });

        html += '</div>';
        container.innerHTML = html;
    }

    showRoleForm(roleId = null) {
        const role = roleId ? this.data.roles.find(r => r.id === roleId) : null;
        
        document.getElementById('roleModalTitle').textContent = 
            role ? '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–æ–ª–∏' : '–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–æ–ª–∏';
        document.getElementById('roleId').value = role ? role.id : '';
        document.getElementById('roleName').value = role ? role.name : '';
        document.getElementById('roleDescription').value = role ? role.description : '';
        document.getElementById('roleIcon').value = role ? role.icon : 'üé®';
        document.getElementById('roleActive').checked = role ? role.is_active : true;

        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
        this.loadRoleButtons(role);

        document.getElementById('roleModal').classList.add('active');
    }

    loadRoleButtons(role = null) {
        const buttonsContainer = document.getElementById('roleButtons');
        const availableButtons = [
            { id: 'quiz', name: '–ö–≤–∏–∑—ã', description: '–î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—é –∫–≤–∏–∑–æ–≤' },
            { id: 'marathon', name: '–ú–∞—Ä–∞—Ñ–æ–Ω—ã', description: '–î–æ—Å—Ç—É–ø –∫ —É—á–∞—Å—Ç–∏—é –≤ –º–∞—Ä–∞—Ñ–æ–Ω–∞—Ö' },
            { id: 'works', name: '–†–∞–±–æ—Ç—ã', description: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ä–∞–±–æ—Ç—ã' },
            { id: 'activities', name: '–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏', description: '–ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π' },
            { id: 'posts', name: '–ü–æ—Å—Ç—ã', description: '–î–æ—Å—Ç—É–ø –∫ –ø–æ—Å—Ç–∞–º –∫–∞–Ω–∞–ª–∞' },
            { id: 'shop', name: '–ú–∞–≥–∞–∑–∏–Ω', description: '–î–æ—Å—Ç—É–ø –∫ –º–∞–≥–∞–∑–∏–Ω—É' },
            { id: 'invite', name: '–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è', description: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≥–ª–∞—à–∞—Ç—å –¥—Ä—É–∑–µ–π' },
            { id: 'interactives', name: '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—ã', description: '–î–æ—Å—Ç—É–ø –∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –∑–∞–¥–∞–Ω–∏—è–º' },
            { id: 'change_role', name: '–°–º–µ–Ω–∞ —Ä–æ–ª–∏', description: '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º–µ–Ω—è—Ç—å —Ä–æ–ª—å' }
        ];

        let html = '';
        availableButtons.forEach(button => {
            const isChecked = role ? role.available_buttons.includes(button.id) : true;
            html += `
                <div style="display: flex; align-items: center; gap: 8px; padding: 8px; border: 1px solid #e2e8f0; border-radius: 8px;">
                    <input type="checkbox" id="btn_${button.id}" value="${button.id}" ${isChecked ? 'checked' : ''}>
                    <label for="btn_${button.id}" style="cursor: pointer; flex: 1;">
                        <div style="font-weight: 500;">${button.name}</div>
                        <div style="font-size: 12px; color: #718096;">${button.description}</div>
                    </label>
                </div>
            `;
        });

        buttonsContainer.innerHTML = html;
    }

    async saveRole() {
        const form = document.getElementById('roleForm');
        const formData = new FormData(form);
        
        const roleData = {
            name: formData.get('roleName'),
            description: formData.get('roleDescription'),
            icon: formData.get('roleIcon'),
            is_active: document.getElementById('roleActive').checked
        };

        // –°–æ–±–∏—Ä–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏
        const selectedButtons = [];
        document.querySelectorAll('#roleButtons input[type="checkbox"]:checked').forEach(checkbox => {
            selectedButtons.push(checkbox.value);
        });
        roleData.available_buttons = selectedButtons;

        try {
            const roleId = document.getElementById('roleId').value;
            let response;

            if (roleId) {
                // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                response = await fetch(`/api/admin/roles/${roleId}?userId=${this.currentAdmin.user_id}`, {
                    method: 'PUT',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(roleData)
                });
            } else {
                // –°–æ–∑–¥–∞–Ω–∏–µ
                response = await fetch(`/api/admin/roles?userId=${this.currentAdmin.user_id}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(roleData)
                });
            }

            if (response.ok) {
                this.showMessage(`–†–æ–ª—å "${roleData.name}" —É—Å–ø–µ—à–Ω–æ ${roleId ? '–æ–±–Ω–æ–≤–ª–µ–Ω–∞' : '—Å–æ–∑–¥–∞–Ω–∞'}!`, 'success');
                this.closeRoleModal();
                await this.loadRoles();
            } else {
                throw new Error(await response.text());
            }
        } catch (error) {
            this.showError('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–æ–ª–∏: ' + error.message);
        }
    }

    closeRoleModal() {
        document.getElementById('roleModal').classList.remove('active');
        document.getElementById('roleForm').reset();
    }

    async deleteRole(roleId) {
        const role = this.data.roles.find(r => r.id === roleId);
        if (!role) return;

        const userCount = this.data.users.filter(user => user.role === role.name).length;
        
        if (userCount > 0) {
            this.showError(`–ù–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å "${role.name}", —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ ${userCount} –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º`);
            return;
        }

        if (!confirm(`–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å "${role.name}"?`)) {
            return;
        }

        try {
            const response = await fetch(`/api/admin/roles/${roleId}?userId=${this.currentAdmin.user_id}`, {
                method: 'DELETE'
            });

            if (response.ok) {
                this.showMessage(`–†–æ–ª—å "${role.name}" —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–∞!`, 'success');
                await this.loadRoles();
            } else {
                throw new Error(await response.text());
            }
        } catch (error) {
            this.showError('–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ä–æ–ª–∏: ' + error.message);
        }
    }

    async editRole(roleId) {
        this.showRoleForm(roleId);
    }

    async loadCharacters() {
        try {
            const response = await fetch(`/api/admin/characters?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º');
            
            this.data.characters = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π:', error);
        }
    }

    async loadQuizzes() {
        try {
            const response = await fetch(`/api/admin/quizzes?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–≤–∏–∑–∞–º');
            
            this.data.quizzes = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–≤–∏–∑–æ–≤:', error);
        }
    }

    async loadMarathons() {
        try {
            const response = await fetch(`/api/admin/marathons?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ä–∞—Ñ–æ–Ω–∞–º');
            
            this.data.marathons = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤:', error);
        }
    }

    async loadShopItems() {
        try {
            const response = await fetch(`/api/admin/shop/items?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞–≥–∞–∑–∏–Ω—É');
            
            this.data.shopItems = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤:', error);
        }
    }

    async loadPosts() {
        try {
            const response = await fetch(`/api/admin/channel-posts?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ—Å—Ç–∞–º');
            
            const data = await response.json();
            this.data.posts = data.posts;
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Å—Ç–æ–≤:', error);
        }
    }

    async loadInteractives() {
        try {
            const response = await fetch(`/api/admin/interactives?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–∞–º');
            
            this.data.interactives = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–æ–≤:', error);
        }
    }

    async loadAdmins() {
        try {
            const response = await fetch(`/api/admin/admins?userId=${this.currentAdmin.user_id}`);
            if (!response.ok) throw new Error('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º');
            
            this.data.admins = await response.json();
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:', error);
        }
    }

    async loadModerationData() {
        try {
            const [worksResponse, reviewsResponse] = await Promise.all([
                fetch(`/api/admin/user-works?userId=${this.currentAdmin.user_id}&status=pending`),
                fetch(`/api/admin/reviews?userId=${this.currentAdmin.user_id}&status=pending`)
            ]);

            if (worksResponse.ok) {
                const worksData = await worksResponse.json();
                this.data.moderation.works = worksData.works;
            }

            if (reviewsResponse.ok) {
                const reviewsData = await reviewsResponse.json();
                this.data.moderation.reviews = reviewsData.reviews;
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏:', error);
        }
    }

    showTab(tabName) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
        document.querySelectorAll('.nav-item').forEach(item => {
            item.classList.remove('active');
        });
        document.querySelector(`.nav-item[data-tab="${tabName}"]`).classList.add('active');

        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
        document.getElementById('pageTitle').textContent = this.getTabTitle(tabName);

        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
        document.querySelectorAll('.tab-content').forEach(tab => {
            tab.classList.remove('active');
        });

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        const targetTab = document.getElementById(tabName);
        if (targetTab) {
            targetTab.classList.add('active');
        } else {
            this.loadTabContent(tabName);
        }

        this.currentTab = tabName;
    }

    getTabTitle(tabName) {
        const titles = {
            dashboard: '–î–∞—à–±–æ—Ä–¥',
            users: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
            roles: '–†–æ–ª–∏',
            characters: '–ü–µ—Ä—Å–æ–Ω–∞–∂–∏',
            quizzes: '–ö–≤–∏–∑—ã',
            marathons: '–ú–∞—Ä–∞—Ñ–æ–Ω—ã',
            interactives: '–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—ã',
            shop: '–ú–∞–≥–∞–∑–∏–Ω',
            posts: '–ü–æ—Å—Ç—ã',
            moderation: '–ú–æ–¥–µ—Ä–∞—Ü–∏—è',
            admins: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã',
            settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏'
        };
        return titles[tabName] || tabName;
    }

    async loadTabContent(tabName) {
        const dynamicContent = document.getElementById('dynamicContent');
        dynamicContent.innerHTML = `
            <div class="content-card">
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞ ${this.getTabTitle(tabName).toLowerCase()}...</div>
                </div>
            </div>
        `;

        try {
            let content = '';
            
            switch (tabName) {
                case 'characters':
                    content = await this.getCharactersContent();
                    break;
                case 'quizzes':
                    content = await this.getQuizzesContent();
                    break;
                case 'marathons':
                    content = await this.getMarathonsContent();
                    break;
                case 'interactives':
                    content = await this.getInteractivesContent();
                    break;
                case 'shop':
                    content = await this.getShopContent();
                    break;
                case 'posts':
                    content = await this.getPostsContent();
                    break;
                case 'moderation':
                    content = await this.getModerationContent();
                    break;
                case 'admins':
                    content = await this.getAdminsContent();
                    break;
                case 'settings':
                    content = await this.getSettingsContent();
                    break;
                default:
                    content = '<div class="empty-state"><div class="empty-state-icon">üöß</div><h3>–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</h3></div>';
            }

            dynamicContent.innerHTML = content;
            dynamicContent.classList.add('tab-content', 'active');
        } catch (error) {
            console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∫–ª–∞–¥–∫–∏ ${tabName}:`, error);
            dynamicContent.innerHTML = `
                <div class="content-card">
                    <div class="message error">
                        –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: ${error.message}
                    </div>
                </div>
            `;
        }
    }

    async getCharactersContent() {
        await this.loadCharacters();
        
        if (this.data.characters.length === 0) {
            return `
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏</h2>
                        <button class="btn btn-success" onclick="adminPanel.showCharacterForm()">
                            <span>‚ûï</span>
                            –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                        </button>
                    </div>
                    <div class="empty-state">
                        <div class="empty-state-icon">üë§</div>
                        <h3>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                        <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π.</p>
                    </div>
                </div>
            `;
        }

        let html = `
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">üë§ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏</h2>
                    <button class="btn btn-success" onclick="adminPanel.showCharacterForm()">
                        <span>‚ûï</span>
                        –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
                    </button>
                </div>
                <div class="characters-grid" style="display: grid; gap: 16px;">
        `;

        this.data.characters.forEach(character => {
            const role = this.data.roles.find(r => r.id === character.role_id);
            html += `
                <div class="item-card">
                    <div class="item-header">
                        <div>
                            <div class="item-title">${character.name}</div>
                            <div class="item-description">${character.description}</div>
                        </div>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-info" onclick="adminPanel.editCharacter(${character.id})">
                                ‚úèÔ∏è
                            </button>
                            <button class="btn btn-sm btn-danger" onclick="adminPanel.deleteCharacter(${character.id})">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>
                    <div class="item-meta">
                        <span class="badge badge-info">
                            ${role ? role.name : '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è —Ä–æ–ª—å'}
                        </span>
                        <span class="badge badge-secondary">
                            –ë–æ–Ω—É—Å: ${character.bonus_type} (${character.bonus_value})
                        </span>
                        <span class="badge ${character.is_active ? 'badge-success' : 'badge-danger'}">
                            ${character.is_active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}
                        </span>
                    </div>
                </div>
            `;
        });

        html += `
                </div>
            </div>
        `;

        return html;
    }

    async getQuizzesContent() {
        await this.loadQuizzes();
        
        let html = `
            <div class="content-card">
                <div class="card-header">
                    <h2 class="card-title">üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–∏–∑–∞–º–∏</h2>
                    <button class="btn btn-success" onclick="adminPanel.showQuizForm()">
                        <span>‚ûï</span>
                        –°–æ–∑–¥–∞—Ç—å –∫–≤–∏–∑
                    </button>
                </div>
        `;

        if (this.data.quizzes.length === 0) {
            html += `
                <div class="empty-state">
                    <div class="empty-state-icon">üéØ</div>
                    <h3>–ö–≤–∏–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h3>
                    <p>–í —Å–∏—Å—Ç–µ–º–µ –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∫–≤–∏–∑–æ–≤.</p>
                </div>
            `;
        } else {
            html += '<div class="quizzes-grid" style="display: grid; gap: 16px;">';
            
            this.data.quizzes.forEach(quiz => {
                html += `
                    <div class="item-card">
                        <div class="item-header">
                            <div>
                                <div class="item-title">${quiz.title}</div>
                                <div class="item-description">${quiz.description}</div>
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-sm btn-info" onclick="adminPanel.editQuiz(${quiz.id})">
                                    ‚úèÔ∏è
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="adminPanel.deleteQuiz(${quiz.id})">
                                    üóëÔ∏è
                                </button>
                            </div>
                        </div>
                        <div class="item-meta">
                            <span class="badge ${quiz.is_active ? 'badge-success' : 'badge-danger'}">
                                ${quiz.is_active ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'}
                            </span>
                            <span class="badge badge-info">
                                ‚ùì ${quiz.questions.length} –≤–æ–ø—Ä–æ—Å–æ–≤
                            </span>
                            <span class="badge badge-secondary">
                                ‚ú® ${quiz.sparks_per_correct} –∑–∞ –æ—Ç–≤–µ—Ç
                            </span>
                            <span class="badge badge-secondary">
                                üéØ ${quiz.sparks_perfect_bonus} –±–æ–Ω—É—Å
                            </span>
                            <span class="badge badge-info">
                                üë• ${quiz.completions_count} –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
                            </span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
        }

        html += '</div>';
        return html;
    }

    // –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–æ–∫...

    showMessage(message, type = 'info') {
        const messageArea = document.getElementById('messageArea');
        const messageEl = document.createElement('div');
        messageEl.className = `message ${type}`;
        messageEl.textContent = message;
        
        messageArea.appendChild(messageEl);
        
        setTimeout(() => {
            messageEl.remove();
        }, 5000);
    }

    showError(message) {
        this.showMessage(message, 'error');
    }

    viewUserDetails(userId) {
        const user = this.data.users.find(u => u.id === userId);
        if (!user) return;

        alert(`
–î–µ—Ç–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

üë§ –ò–º—è: ${user.name}
üì± Username: ${user.username || '–ù–µ —É–∫–∞–∑–∞–Ω'}
üé≠ –†–æ–ª—å: ${user.role}
üìä –£—Ä–æ–≤–µ–Ω—å: ${user.level}
‚ú® –ò—Å–∫—Ä—ã: ${user.sparks.toFixed(1)}
üéØ –ö–≤–∏–∑–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ: ${user.total_quizzes}
üèÉ‚Äç‚ôÇÔ∏è –ú–∞—Ä–∞—Ñ–æ–Ω–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ: ${user.total_marathons}
üéÆ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ: ${user.total_interactives}
üñºÔ∏è –†–∞–±–æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${user.total_works}
‚úÖ –†–∞–±–æ—Ç –æ–¥–æ–±—Ä–µ–Ω–æ: ${user.approved_works}
üìÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: ${new Date(user.registration_date).toLocaleDateString()}
üïê –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å: ${new Date(user.last_active).toLocaleString()}
        `);
    }

    async editUserRole(userId) {
        const user = this.data.users.find(u => u.id === userId);
        if (!user) return;

        await this.loadRoles();
        await this.loadCharacters();

        const rolesOptions = this.data.roles
            .filter(role => role.is_active)
            .map(role => `<option value="${role.id}" ${user.role === role.name ? 'selected' : ''}>${role.icon} ${role.name}</option>`)
            .join('');

        const charactersOptions = this.data.characters
            .filter(char => char.is_active)
            .map(char => `<option value="${char.id}" ${user.character === char.name ? 'selected' : ''}>${char.name}</option>`)
            .join('');

        const modalContent = `
            <div class="modal active" id="userRoleModal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title">–°–º–µ–Ω–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
                        <button class="modal-close" onclick="document.getElementById('userRoleModal').remove()">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: <strong>${user.name}</strong></p>
                        <div class="form-group">
                            <label class="form-label">–ù–æ–≤–∞—è —Ä–æ–ª—å:</label>
                            <select id="newUserRole" class="form-control">
                                ${rolesOptions}
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">–ü–µ—Ä—Å–æ–Ω–∞–∂:</label>
                            <select id="newUserCharacter" class="form-control">
                                ${charactersOptions}
                            </select>
                        </div>
                        <div class="action-buttons" style="justify-content: flex-end; margin-top: 24px;">
                            <button class="btn btn-secondary" onclick="document.getElementById('userRoleModal').remove()">–û—Ç–º–µ–Ω–∞</button>
                            <button class="btn btn-primary" onclick="adminPanel.saveUserRole(${userId})">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                        </div>
                    </div>
                </div>
            </div>
        `;

        document.body.insertAdjacentHTML('beforeend', modalContent);
    }

    async saveUserRole(userId) {
        const newRoleId = document.getElementById('newUserRole').value;
        const newCharacterId = document.getElementById('newUserCharacter').value;

        try {
            const response = await fetch(`/api/users/change-role?userId=${this.currentAdmin.user_id}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    userId: userId,
                    roleId: parseInt(newRoleId),
                    characterId: parseInt(newCharacterId)
                })
            });

            if (response.ok) {
                this.showMessage('–†–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å–ø–µ—à–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∞!', 'success');
                document.getElementById('userRoleModal').remove();
                await this.loadUsers();
            } else {
                throw new Error(await response.text());
            }
        } catch (error) {
            this.showError('–û—à–∏–±–∫–∞ —Å–º–µ–Ω—ã —Ä–æ–ª–∏: ' + error.message);
        }
    }
}

// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ HTML
function showTab(tabName) {
    if (window.adminPanel) {
        window.adminPanel.showTab(tabName);
    }
}

function loadAllData() {
    if (window.adminPanel) {
        window.adminPanel.loadAllData();
    }
}

function showSystemInfo() {
    const info = `
–°–∏—Å—Ç–µ–º–∞: –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è v8.0
–í–µ—Ä—Å–∏—è: 8.0.0
–¢–∏–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: In-Memory
–°—Ç–∞—Ç—É—Å: üü¢ –ê–∫—Ç–∏–≤–Ω–∞

–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–≤–∏–∑–æ–≤
‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ä–∞—Ñ–æ–Ω–∞–º–∏
‚úÖ –ú–∞–≥–∞–∑–∏–Ω —Ç–æ–≤–∞—Ä–æ–≤
‚úÖ –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è
‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–î–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É.
    `;
    alert(info);
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    window.adminPanel = new AdminPanel();
});
