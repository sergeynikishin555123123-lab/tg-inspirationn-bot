<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f6fa; color: #2d3748; line-height: 1.6; padding: 20px;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { 
            background: white; padding: 20px; border-radius: 10px; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); margin-bottom: 20px;
        }
        .nav-tabs { 
            display: flex; background: white; border-radius: 10px; padding: 10px;
            margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); flex-wrap: wrap;
        }
        .nav-tab { 
            padding: 10px 20px; cursor: pointer; border-radius: 5px; margin-right: 10px;
            margin-bottom: 5px; transition: all 0.3s ease; white-space: nowrap;
        }
        .nav-tab.active { background: #667eea; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .card { 
            background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            background: #667eea; color: white; border: none; padding: 10px 20px;
            border-radius: 5px; cursor: pointer; margin-right: 10px; margin-bottom: 10px;
            transition: all 0.3s ease;
        }
        .btn:hover { background: #5a67d8; transform: translateY(-1px); }
        .btn-success { background: #48bb78; }
        .btn-success:hover { background: #38a169; }
        .btn-warning { background: #ed8936; }
        .btn-warning:hover { background: #dd6b20; }
        .btn-danger { background: #f56565; }
        .btn-danger:hover { background: #e53e3e; }
        .btn-info { background: #4299e1; }
        .btn-info:hover { background: #3182ce; }
        .form-group { margin-bottom: 15px; }
        .form-control { 
            width: 100%; padding: 10px; border: 2px solid #e2e8f0; border-radius: 5px;
            font-size: 16px; margin-top: 5px; transition: border-color 0.3s ease;
        }
        .form-control:focus { border-color: #667eea; outline: none; }
        .form-label { font-weight: 600; margin-bottom: 5px; display: block; }
        .stats-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px; margin-bottom: 20px;
        }
        .stat-card {
            background: white; padding: 20px; border-radius: 10px; text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s ease;
        }
        .stat-card:hover { transform: translateY(-2px); }
        .stat-number { font-size: 2em; font-weight: bold; color: #667eea; margin-bottom: 5px; }
        .stat-label { color: #718096; font-size: 14px; }
        .role-card, .character-card, .quiz-card, .marathon-card, .admin-card, .shop-item-card, .post-card, .review-card, .work-card {
            background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px;
            padding: 15px; margin-bottom: 15px; transition: all 0.3s ease;
        }
        .role-card:hover, .character-card:hover, .quiz-card:hover, .marathon-card:hover, .admin-card:hover, 
        .shop-item-card:hover, .post-card:hover, .review-card:hover, .work-card:hover {
            border-color: #667eea; transform: translateY(-1px);
        }
        .message {
            padding: 10px; border-radius: 5px; margin-bottom: 15px;
        }
        .message.success { background: #c6f6d5; color: #276749; border: 1px solid #9ae6b4; }
        .message.error { background: #fed7d7; color: #c53030; border: 1px solid #feb2b2; }
        .message.info { background: #bee3f8; color: #2c5aa0; border: 1px solid #90cdf4; }
        .message.warning { background: #feebc8; color: #dd6b20; border: 1px solid #fbd38d; }
        .loading { text-align: center; color: #718096; padding: 20px; }
        .question-item {
            background: #f7fafc; border: 1px solid #e2e8f0; border-radius: 8px;
            padding: 15px; margin-bottom: 15px;
        }
        .option-item { 
            display: flex; align-items: center; margin-bottom: 8px; padding: 8px;
            background: white; border-radius: 5px;
        }
        .option-item input[type="radio"] { margin-right: 10px; }
        .option-item input[type="text"] { flex: 1; padding: 5px; border: 1px solid #e2e8f0; border-radius: 3px; }
        .badge {
            display: inline-block; padding: 3px 8px; border-radius: 12px; font-size: 12px;
            font-weight: 600; margin-left: 10px;
        }
        .badge-success { background: #c6f6d5; color: #276749; }
        .badge-warning { background: #feebc8; color: #dd6b20; }
        .badge-danger { background: #fed7d7; color: #c53030; }
        .badge-info { background: #bee3f8; color: #2c5aa0; }
        .badge-secondary { background: #e2e8f0; color: #4a5568; }
        .content-preview {
            background: white; border: 1px solid #e2e8f0; border-radius: 5px;
            padding: 10px; margin-top: 10px; max-height: 200px; overflow-y: auto;
        }
        .review-text {
            background: white; border: 1px solid #e2e8f0; border-radius: 5px;
            padding: 10px; margin: 10px 0; font-style: italic;
        }
        .moderation-actions {
            display: flex; gap: 10px; margin-top: 10px;
        }
        .file-preview {
            max-width: 200px; max-height: 150px; border-radius: 5px;
            margin: 10px 0; border: 2px solid #e2e8f0;
        }
        .tab-subnav {
            display: flex; background: #f7fafc; border-radius: 5px; padding: 5px;
            margin-bottom: 15px; flex-wrap: wrap;
        }
        .tab-subnav-item {
            padding: 8px 15px; cursor: pointer; border-radius: 3px;
            margin-right: 5px; margin-bottom: 5px; transition: all 0.3s ease;
        }
        .tab-subnav-item.active { background: #667eea; color: white; }
        .work-image {
            max-width: 100%; max-height: 200px; border-radius: 8px;
            margin: 10px 0; border: 2px solid #e2e8f0;
        }
        .buttons-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px; margin: 10px 0;
        }
        .button-checkbox {
            display: flex; align-items: center; padding: 8px; background: white;
            border: 2px solid #e2e8f0; border-radius: 5px; cursor: pointer;
        }
        .button-checkbox.checked { border-color: #667eea; background: #edf2f7; }
        .button-checkbox input { margin-right: 8px; }
        .media-preview {
            max-width: 300px; max-height: 200px; border-radius: 8px;
            margin: 10px 0; border: 2px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å - –ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è</h1>
            <p>–ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º</p>
            <div id="adminInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="dashboard">üìä –î–∞—à–±–æ—Ä–¥</div>
            <div class="nav-tab" data-tab="roles">üé≠ –†–æ–ª–∏</div>
            <div class="nav-tab" data-tab="characters">üë• –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
            <div class="nav-tab" data-tab="quizzes">üéØ –ö–≤–∏–∑—ã</div>
            <div class="nav-tab" data-tab="marathons">üèÉ‚Äç‚ôÇÔ∏è –ú–∞—Ä–∞—Ñ–æ–Ω—ã</div>
            <div class="nav-tab" data-tab="shop">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="nav-tab" data-tab="user-works">üñºÔ∏è –†–∞–±–æ—Ç—ã</div>
            <div class="nav-tab" data-tab="posts">üì∞ –ü–æ—Å—Ç—ã</div>
            <div class="nav-tab" data-tab="reviews">üí¨ –û—Ç–∑—ã–≤—ã</div>
            <div class="nav-tab" data-tab="admins">üîß –ê–¥–º–∏–Ω—ã</div>
            <div class="nav-tab" data-tab="stats">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </div>

        <!-- –î–∞—à–±–æ—Ä–¥ -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid" id="dashboardStats">
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –∫–≤–∏–∑–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö –º–∞—Ä–∞—Ñ–æ–Ω–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–¢–æ–≤–∞—Ä–æ–≤ –≤ –º–∞–≥–∞–∑–∏–Ω–µ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–í—Å–µ–≥–æ –∏—Å–∫—Ä</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div class="stat-label">–†–∞–±–æ—Ç –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏</div>
                </div>
            </div>

            <div class="card">
                <h3>üìà –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <button class="btn btn-success" onclick="showTab('roles')">üé≠ –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å</button>
                <button class="btn btn-success" onclick="showTab('characters')">üë• –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</button>
                <button class="btn btn-success" onclick="showTab('quizzes')">üéØ –°–æ–∑–¥–∞—Ç—å –∫–≤–∏–∑</button>
                <button class="btn btn-success" onclick="showTab('marathons')">üèÉ‚Äç‚ôÇÔ∏è –°–æ–∑–¥–∞—Ç—å –º–∞—Ä–∞—Ñ–æ–Ω</button>
                <button class="btn btn-success" onclick="showTab('shop')">üõí –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</button>
                <button class="btn btn-warning" onclick="showTab('user-works')">üñºÔ∏è –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—ã</button>
                <button class="btn btn-warning" onclick="showTab('reviews')">üí¨ –ú–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–∑—ã–≤—ã</button>
                <button class="btn btn-success" onclick="showTab('posts')">üì∞ –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</button>
                <button class="btn" onclick="showTab('admins')">üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏</button>
            </div>
        </div>

        <!-- –†–æ–ª–∏ -->
        <div id="roles" class="tab-content">
            <!-- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–æ–ª–∏ -->
            <div class="card">
                <h3>üé≠ –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å</h3>
                <form id="createRoleForm">
                    <div class="form-group">
                        <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏:</label>
                        <input type="text" id="roleName" class="form-control" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                        <textarea id="roleDescription" class="form-control" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ä–æ–ª–∏" required></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ò–∫–æ–Ω–∫–∞:</label>
                        <input type="text" id="roleIcon" class="form-control" placeholder="üé®" value="üé®">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:</label>
                        <div class="buttons-grid">
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="quiz" checked>
                                üéØ –ö–≤–∏–∑—ã
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="marathon" checked>
                                üèÉ‚Äç‚ôÇÔ∏è –ú–∞—Ä–∞—Ñ–æ–Ω—ã
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="works" checked>
                                üñºÔ∏è –†–∞–±–æ—Ç—ã
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="activities" checked>
                                üìä –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="posts" checked>
                                üì∞ –ü–æ—Å—Ç—ã
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="shop" checked>
                                üõí –ú–∞–≥–∞–∑–∏–Ω
                            </label>
                            <label class="button-checkbox">
                                <input type="checkbox" name="available_buttons" value="invite" checked>
                                üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å
                            </label>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-success">‚úÖ –°–æ–∑–¥–∞—Ç—å —Ä–æ–ª—å</button>
                </form>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π -->
            <div class="card">
                <h3>üìã –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π</h3>
                <div id="rolesList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–æ–ª–µ–π...</div>
                </div>
            </div>
        </div>

        <!-- –ü–æ—Å—Ç—ã –∫–∞–Ω–∞–ª–∞ -->
        <div id="posts" class="tab-content">
            <div class="card">
                <h3>üì∞ –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</h3>
                <form id="createPostForm">
                    <div class="form-group">
                        <label class="form-label">ID –ø–æ—Å—Ç–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π):</label>
                        <input type="text" id="postId" class="form-control" required placeholder="post_123">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞:</label>
                        <input type="text" id="postTitle" class="form-control" required placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Å—Ç–∞">
                    </div>
                    <div class="form-group">
                        <label class="form-label">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –ø–æ—Å—Ç–∞:</label>
                        <textarea id="postContent" class="form-control" rows="4" placeholder="–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞"></textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">–¢–∏–ø –º–µ–¥–∏–∞:</label>
                        <select id="postMediaType" class="form-control" onchange="toggleMediaFields()">
                            <option value="text">–¢–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç</option>
                            <option value="image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</option>
                            <option value="video">–í–∏–¥–µ–æ</option>
                        </select>
                    </div>
                    <div class="form-group" id="imageField" style="display: none;">
                        <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ:</label>
                        <input type="url" id="postImageUrl" class="form-control" placeholder="https://example.com/image.jpg">
                    </div>
                    <div class="form-group" id="videoField" style="display: none;">
                        <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏–¥–µ–æ:</label>
                        <input type="url" id="postVideoUrl" class="form-control" placeholder="https://example.com/video.mp4">
                    </div>
                    <button type="submit" class="btn btn-success">‚úÖ –°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç</button>
                </form>
            </div>

            <div class="card">
                <h3>üì∞ –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç–æ–≤</h3>
                <div id="postsList">
                    <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å—Ç–æ–≤...</div>
                </div>
            </div>
        </div>

        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ -->
        <!-- [–ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π HTML –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏] -->

    </div>

    <div id="messageArea"></div>

    <script>
        const API_BASE = window.location.origin;
        const urlParams = new URLSearchParams(window.location.search);
        const currentAdminId = urlParams.get('userId');

        let currentQuestions = [];
        let currentTasks = [];
        let currentReviewStatus = 'pending';
        let currentWorkStatus = 'pending';

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
        async function initializeAdmin() {
            if (!currentAdminId) {
                showMessage('‚ùå User ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö', 'error');
                return;
            }

            try {
                await loadDashboard();
                document.getElementById('adminInfo').innerHTML = `
                    <div style="margin-top: 10px;">
                        <strong>ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</strong> ${currentAdminId}
                        <span class="badge badge-success" id="adminRoleBadge">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                    </div>
                `;
                
                // –ù–∞–≤–∏–≥–∞—Ü–∏—è
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        showTab(tab.dataset.tab);
                    });
                });

                // –ü–æ–¥–Ω–∞–≤–∏–≥–∞—Ü–∏—è
                document.querySelectorAll('.tab-subnav-item').forEach(item => {
                    item.addEventListener('click', function() {
                        const tab = this.closest('.tab-content');
                        const items = tab.querySelectorAll('.tab-subnav-item');
                        items.forEach(i => i.classList.remove('active'));
                        this.classList.add('active');
                        
                        if (tab.id === 'user-works') {
                            currentWorkStatus = this.dataset.status;
                            loadUserWorks();
                        } else if (tab.id === 'reviews') {
                            currentReviewStatus = this.dataset.status;
                            loadReviews();
                        }
                    });
                });

                // –§–æ—Ä–º—ã
                document.getElementById('createRoleForm').addEventListener('submit', createRole);
                document.getElementById('createCharacterForm').addEventListener('submit', createCharacter);
                document.getElementById('createQuizForm').addEventListener('submit', createQuiz);
                document.getElementById('createMarathonForm').addEventListener('submit', createMarathon);
                document.getElementById('createShopItemForm').addEventListener('submit', createShopItem);
                document.getElementById('createPostForm').addEventListener('submit', createPost);
                document.getElementById('addAdminForm').addEventListener('submit', addAdmin);

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ–∫–±–æ–∫—Å–æ–≤ –∫–Ω–æ–ø–æ–∫
                initButtonCheckboxes();

                // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                loadRoles();
                loadCharacters();
                loadQuizzes();
                loadMarathons();
                loadShopItems();
                loadUserWorks();
                loadPosts();
                loadReviews();
                loadAdmins();
                loadFullStats();

                // –î–æ–±–∞–≤–ª—è–µ–º –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –∏ –∑–∞–¥–∞–Ω–∏–µ
                addQuestion();
                addTask();

            } catch (error) {
                showMessage('‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏', 'error');
                console.error('Admin init error:', error);
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –º–µ–¥–∏–∞ –≤ —Ñ–æ—Ä–º–µ –ø–æ—Å—Ç–æ–≤
        function toggleMediaFields() {
            const mediaType = document.getElementById('postMediaType').value;
            document.getElementById('imageField').style.display = mediaType === 'image' ? 'block' : 'none';
            document.getElementById('videoField').style.display = mediaType === 'video' ? 'block' : 'none';
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–µ–¥–∏–∞
        async function createPost(e) {
            e.preventDefault();
            
            const formData = {
                post_id: document.getElementById('postId').value,
                title: document.getElementById('postTitle').value,
                content: document.getElementById('postContent').value,
                image_url: document.getElementById('postImageUrl').value,
                video_url: document.getElementById('postVideoUrl').value,
                media_type: document.getElementById('postMediaType').value
            };

            try {
                const response = await fetch(`${API_BASE}/api/admin/channel-posts?userId=${currentAdminId}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData)
                });

                const result = await response.json();

                if (result.success) {
                    showMessage('‚úÖ –ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω –∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –≤ –∫–∞–Ω–∞–ª–µ!', 'success');
                    document.getElementById('createPostForm').reset();
                    toggleMediaFields(); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–ª—è –º–µ–¥–∏–∞
                    loadPosts();
                    loadDashboard();
                } else {
                    showMessage(`‚ùå –û—à–∏–±–∫–∞: ${result.error}`, 'error');
                }
            } catch (error) {
                showMessage('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ—Å—Ç–∞', 'error');
            }
        }

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–∞–∫–∏–º–∏ –∂–µ...
        // [–ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Å—Ç–∞–ª—å–Ω–æ–π JavaScript –∫–æ–¥ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏]

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', initializeAdmin);
    </script>
</body>
</html>
